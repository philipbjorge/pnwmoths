var PNWMOTHS=PNWMOTHS||{};PNWMOTHS.Chart=function(){return{charts:{},prepareDataLabels:function(e,c,d){var b=[],a,d=d||" ";for(a in e){if(e.hasOwnProperty(a)){b.push(e[a]);for(i=0;i<c;i++){b.push(d)}}}return b},flattenData:function(b){var a=[];for(i in b){if(b.hasOwnProperty(i)){for(j in b[i]){if(b[i].hasOwnProperty(j)){a.push(b[i][j])}}}}return a},sumDataByMonthAndSegment:function(c,g,h){var k=[],a=0,l=12,g=g||10,h=h||2,d,b,e,f;for(d=a;d<l;d++){k[d]=[];for(b=0;b<=h;b++){k[d][b]=0}}for(d in c){if(c.hasOwnProperty(d)&&$.inArray(c[d].state,["WA","OR","BC","MT","ID"])!=-1&&c[d].month&&c[d].day){f=parseInt(c[d].month)-1;if(0<=f&&f<=11){e=Math.floor(parseInt(c[d].day)/g);e=Math.min(e,h);k[f][e]+=1}}}return k},initialize:function(b,f,a){var g=[],c=10,d=2,e=["J","F","M","A","M","J","J","A","S","O","N","D"];if(f.length>0){g=this.sumDataByMonthAndSegment(f,c,d);g=this.flattenData(g)}return this.render(b,[g],this.prepareDataLabels(e,d),a)},render:function(g,d,f,b){var e,a=3,c,k,h;h=jQuery("#"+g);h.empty();h.show();e=Math.max.apply(Math,d[0]);if(e<a){e=e+a}else{e=e+1}c={seriesDefaults:{renderer:jQuery.jqplot.BarRenderer,rendererOptions:{shadowAlpha:0,barWidth:5}},grid:{drawGridlines:false},series:[{color:"#333"}],axes:{xaxis:{label:"Month",renderer:jQuery.jqplot.CategoryAxisRenderer,labelRenderer:jQuery.jqplot.CanvasAxisLabelRenderer,ticks:f},yaxis:{min:0,max:e,label:"Number of Records",labelRenderer:jQuery.jqplot.CanvasAxisLabelRenderer,tickOptions:{formatString:"%i"},showTickMarks:false}}};k=jQuery.extend(true,{},c,b);return jQuery.jqplot(g,d,k)}}}();jQuery(document).ready(function(){jQuery(window).resize(function(b,c){jQuery.each(PNWMOTHS.Chart.charts,function(d,e){e.replot()})});jQuery.each(jQuery(".chart"),function(d,e){var b,f,c;if(jQuery(e).children(".data").length>0){f=jQuery(e).children(".data").text();b="#"+f;c=jQuery.parseJSON(jQuery(e).children(".options").text());if(c===null){c={}}c.title="Seasonality within the PNW";jQuery(b).bind("dataIsReady",function(g,h){if(h.length==0){h=[[null]]}var k=PNWMOTHS.Chart.initialize(jQuery(e).attr("id"),h,c);PNWMOTHS.Chart.charts[jQuery(e).attr("id")]=k})}});var a=jQuery;a("#plot").bind("jqplotDataHighlight",function(f,b,e,g){var d=f.pageX;var c=f.pageY;a("#chartpseudotooltip").html(g[1]);var h={position:"absolute","font-weight":"bold",background:"rgba(255,255,255,0.7)",border:"1px solid black",padding:"0px 2px 0px 2px","font-size":".8em",left:(d+15)+"px",top:(c-10)+"px"};a("#chartpseudotooltip").css(h);a("#chartpseudotooltip").show()});a("#plot").bind("jqplotDataUnhighlight",function(b){a("#chartpseudotooltip").hide();a("#chartpseudotooltip").html("")})});