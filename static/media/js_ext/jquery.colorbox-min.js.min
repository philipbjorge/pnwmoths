(function(aM){function aB(a,c){c=c==="x"?aF.width():aF.height();return typeof a==="string"?Math.round(a.match(/%/)?c/100*parseInt(a,10):parseInt(a,10)):a}function ag(a){a=aM.isFunction(a)?a.call(aJ):a;return aN.photo||a.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i)}function d(){for(var a in aN){if(aM.isFunction(aN[a])&&a.substring(0,2)!=="on"){aN[a]=aN[a].call(aJ)}}aN.rel=aN.rel||aJ.rel;aN.href=aN.href||aJ.href;aN.title=aN.title||aJ.title}function b(a){aJ=a;aN=aM.extend({},aM(aJ).data(aC));d();if(aN.rel&&aN.rel!=="nofollow"){aK=aM(".cboxElement").filter(function(){return(aM(this).data(aC).rel||this.rel)===aN.rel});aI=aK.index(aJ);if(aI<0){aK=aK.add(aJ);aI=aK.length-1}}else{aK=aM(aJ);aI=0}if(!ap){ao=ap=aE;af=aJ;af.blur();aM(document).bind("keydown.cbox_close",function(c){if(c.keyCode===27){c.preventDefault();aL.close()}}).bind("keydown.cbox_arrows",function(c){if(aK.length>1){if(c.keyCode===37){c.preventDefault();an.click()}else{if(c.keyCode===39){c.preventDefault();am.click()}}}});aN.overlayClose&&aA.css({cursor:"pointer"}).one("click",aL.close);aM.event.trigger(aq);aN.onOpen&&aN.onOpen.call(aJ);aA.css({opacity:aN.opacity}).show();aN.w=aB(aN.initialWidth,"x");aN.h=aB(aN.initialHeight,"y");aL.position(0);ae&&aF.bind("resize.cboxie6 scroll.cboxie6",function(){aA.css({width:aF.width(),height:aF.height(),top:aF.scrollTop(),left:aF.scrollLeft()})}).trigger("scroll.cboxie6")}ad.add(an).add(am).add(az).add(ac).hide();ab.html(aN.close).show();aL.slideshow();aL.load()}var aC="colorbox",al="hover",aE=true,aL,av=aM.browser.msie&&!aM.support.opacity,ae=av&&aM.browser.version<7,aq="cbox_open",ak="cbox_load",L="cbox_complete",G="resize.cbox_resize",aA,aH,ay,aD,A,o,h,f,aK,aF,aG,aj,ai,ah,ac,ad,az,am,an,ab,au,at,ax,aw,aJ,af,aI,aN,ap,ao,ar={transition:"elastic",speed:350,width:false,height:false,innerWidth:false,innerHeight:false,initialWidth:"400",initialHeight:"400",maxWidth:false,maxHeight:false,scalePhotos:aE,scrolling:aE,inline:false,html:false,iframe:false,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:aE,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,overlayClose:aE,slideshow:false,slideshowAuto:aE,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false};aL=aM.fn.colorbox=function(a,e){var c=this;if(!c.length){if(c.selector===""){c=aM("<a/>");a.open=aE}else{return this}}c.each(function(){var g=aM.extend({},aM(this).data(aC)?aM(this).data(aC):ar,a);aM(this).data(aC,g).addClass("cboxElement");if(e){aM(this).data(aC).onComplete=e}});a&&a.open&&b(c);return this};aL.init=function(){function a(c){return aM('<div id="cbox'+c+'"/>')}aF=aM(window);aH=aM('<div id="colorbox"/>');aA=a("Overlay").hide();ay=a("Wrapper");aD=a("Content").append(aG=a("LoadedContent").css({width:0,height:0}),ai=a("LoadingOverlay"),ah=a("LoadingGraphic"),ac=a("Title"),ad=a("Current"),az=a("Slideshow"),am=a("Next"),an=a("Previous"),ab=a("Close"));ay.append(aM("<div/>").append(a("TopLeft"),A=a("TopCenter"),a("TopRight")),aM("<div/>").append(o=a("MiddleLeft"),aD,h=a("MiddleRight")),aM("<div/>").append(a("BottomLeft"),f=a("BottomCenter"),a("BottomRight"))).children().children().css({"float":"left"});aj=aM("<div style='position:absolute; top:0; left:0; width:9999px; height:0;'/>");aM("body").prepend(aA,aH.append(ay,aj));if(av){aH.addClass("cboxIE");ae&&aA.css("position","absolute")}aD.children().bind("mouseover mouseout",function(){aM(this).toggleClass(al)}).addClass(al);au=A.height()+f.height()+aD.outerHeight(aE)-aD.height();at=o.width()+h.width()+aD.outerWidth(aE)-aD.width();ax=aG.outerHeight(aE);aw=aG.outerWidth(aE);aH.css({"padding-bottom":au,"padding-right":at}).hide();am.click(aL.next);an.click(aL.prev);ab.click(aL.close);aD.children().removeClass(al);aM(".cboxElement").live("click",function(c){if(c.button!==0&&typeof c.button!=="undefined"){return aE}else{b(this);return false}})};aL.position=function(a,i){function c(j){A[0].style.width=f[0].style.width=aD[0].style.width=j.style.width;ah[0].style.height=ai[0].style.height=aD[0].style.height=o[0].style.height=h[0].style.height=j.style.height}var e=aF.height();e=Math.max(e-aN.h-ax-au,0)/2+aF.scrollTop();var g=Math.max(document.documentElement.clientWidth-aN.w-aw-at,0)/2+aF.scrollLeft();a=aH.width()===aN.w+aw&&aH.height()===aN.h+ax?0:a;ay[0].style.width=ay[0].style.height="9999px";aH.dequeue().animate({width:aN.w+aw,height:aN.h+ax,top:e,left:g},{duration:a,complete:function(){c(this);ao=false;ay[0].style.width=aN.w+aw+at+"px";ay[0].style.height=aN.h+ax+au+"px";i&&i()},step:function(){c(this)}})};aL.resize=function(e){function k(){aN.w=aN.w||aG.width();aN.w=aN.mw&&aN.mw<aN.w?aN.mw:aN.w;return aN.w}function g(){aN.h=aN.h||aG.height();aN.h=aN.mh&&aN.mh<aN.h?aN.mh:aN.h;return aN.h}function i(l){aL.position(l,function(){if(ap){if(av){c&&aG.fadeIn(100);aH[0].style.removeAttribute("filter")}if(aN.iframe){aG.append("<iframe id='cboxIframe'"+(aN.scrolling?" ":"scrolling='no'")+" name='iframe_"+(new Date).getTime()+"' frameborder=0 src='"+aN.href+"' "+(av?"allowtransparency='true'":"")+" />")}aG.show();ac.show().html(aN.title);if(aK.length>1){ad.html(aN.current.replace(/\{current\}/,aI+1).replace(/\{total\}/,aK.length)).show();am.html(aN.next).show();an.html(aN.previous).show();aN.slideshow&&az.show()}ai.hide();ah.hide();aM.event.trigger(L);aN.onComplete&&aN.onComplete.call(aJ);aN.transition==="fade"&&aH.fadeTo(a,1,function(){av&&aH[0].style.removeAttribute("filter")});aF.bind(G,function(){aL.position(0)})}})}if(ap){var j,c,a=aN.transition==="none"?0:aN.speed;aF.unbind(G);if(e){aG.remove();aG=aM('<div id="cboxLoadedContent"/>').html(e);aG.hide().appendTo(aj).css({width:k(),overflow:aN.scrolling?"auto":"hidden"}).css({height:g()}).prependTo(aD);aM("#cboxPhoto").css({cssFloat:"none"});ae&&aM("select:not(#colorbox select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("cbox_cleanup",function(){this.style.visibility="inherit"});aN.transition==="fade"&&aH.fadeTo(a,0,function(){i(0)})||i(a);if(aN.preloading&&aK.length>1){e=aI>0?aK[aI-1]:aK[aK.length-1];j=aI<aK.length-1?aK[aI+1]:aK[0];j=aM(j).data(aC).href||j.href;e=aM(e).data(aC).href||e.href;ag(j)&&aM("<img />").attr("src",j);ag(e)&&aM("<img />").attr("src",e)}}else{setTimeout(function(){var l=aG.wrapInner("<div style='overflow:auto'></div>").children();aN.h=l.height();aG.css({height:aN.h});l.replaceWith(l.children());aL.position(a)},1)}}};aL.load=function(){var a,g,c,e=aL.resize;ao=aE;aJ=aK[aI];aN=aM.extend({},aM(aJ).data(aC));d();aM.event.trigger(ak);aN.onLoad&&aN.onLoad.call(aJ);aN.h=aN.height?aB(aN.height,"y")-ax-au:aN.innerHeight?aB(aN.innerHeight,"y"):false;aN.w=aN.width?aB(aN.width,"x")-aw-at:aN.innerWidth?aB(aN.innerWidth,"x"):false;aN.mw=aN.w;aN.mh=aN.h;if(aN.maxWidth){aN.mw=aB(aN.maxWidth,"x")-aw-at;aN.mw=aN.w&&aN.w<aN.mw?aN.w:aN.mw}if(aN.maxHeight){aN.mh=aB(aN.maxHeight,"y")-ax-au;aN.mh=aN.h&&aN.h<aN.mh?aN.h:aN.mh}a=aN.href;ai.show();ah.show();if(aN.inline){aM('<div id="cboxInlineTemp" />').hide().insertBefore(aM(a)[0]).bind(ak+" cbox_cleanup",function(){aM(this).replaceWith(aG.children())});e(aM(a))}else{if(aN.iframe){e(" ")}else{if(aN.html){e(aN.html)}else{if(ag(a)){g=new Image;g.onload=function(){var i;g.onload=null;g.id="cboxPhoto";aM(g).css({margin:"auto",border:"none",display:"block",cssFloat:"left"});if(aN.scalePhotos){c=function(){g.height-=g.height*i;g.width-=g.width*i};if(aN.mw&&g.width>aN.mw){i=(g.width-aN.mw)/g.width;c()}if(aN.mh&&g.height>aN.mh){i=(g.height-aN.mh)/g.height;c()}}if(aN.h){g.style.marginTop=Math.max(aN.h-g.height,0)/2+"px"}e(g);aK.length>1&&aM(g).css({cursor:"pointer"}).click(aL.next);if(av){g.style.msInterpolationMode="bicubic"}};g.src=a}else{aM("<div />").appendTo(aj).load(a,function(j,i){i==="success"?e(this):e(aM("<p>Request unsuccessful.</p>"))})}}}}};aL.next=function(){if(!ao){aI=aI<aK.length-1?aI+1:0;aL.load()}};aL.prev=function(){if(!ao){aI=aI>0?aI-1:aK.length-1;aL.load()}};aL.slideshow=function(){function a(){az.text(aN.slideshowStop).bind(L,function(){c=setTimeout(aL.next,aN.slideshowSpeed)}).bind(ak,function(){clearTimeout(c)}).one("click",function(){g();aM(this).removeClass(al)});aH.removeClass(e+"off").addClass(e+"on")}var g,c,e="cboxSlideshow_";az.bind("cbox_closed",function(){az.unbind();clearTimeout(c);aH.removeClass(e+"off "+e+"on")});g=function(){clearTimeout(c);az.text(aN.slideshowStart).unbind(L+" "+ak).one("click",function(){a();c=setTimeout(aL.next,aN.slideshowSpeed);aM(this).removeClass(al)});aH.removeClass(e+"on").addClass(e+"off")};if(aN.slideshow&&aK.length>1){aN.slideshowAuto?a():g()}};aL.close=function(){aM.event.trigger("cbox_cleanup");aN.onCleanup&&aN.onCleanup.call(aJ);ap=false;aM(document).unbind("keydown.cbox_close keydown.cbox_arrows");aF.unbind(G+" resize.cboxie6 scroll.cboxie6");aA.css({cursor:"auto"}).fadeOut("fast");aH.stop(aE,false).fadeOut("fast",function(){aM("#colorbox iframe").attr("src","about:blank");aG.remove();aH.css({opacity:1});try{af.focus()}catch(a){}aM.event.trigger("cbox_closed");aN.onClosed&&aN.onClosed.call(aJ)})};aL.element=function(){return aM(aJ)};aL.settings=ar;aM(aL.init)})(jQuery);