(function(a){a.widget("ui.rangeSliderMouseTouch",a.ui.mouse,{_mouseInit:function(){var b=this;a.ui.mouse.prototype._mouseInit.apply(this);this._mouseDownEvent=!1;this.element.bind("touchstart."+this.widgetName,function(c){return b._touchStart(c)})},_mouseDestroy:function(){a(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate);a.ui.mouse.prototype._mouseDestroy.apply(this)},_touchStart:function(d){d.which=1;d.preventDefault();this._fillTouchEvent(d);var c=this,f=this._mouseDownEvent;this._mouseDown(d);if(f!==this._mouseDownEvent){this._touchEndDelegate=function(b){c._touchEnd(b)},this._touchMoveDelegate=function(b){c._touchMove(b)},a(document).bind("touchmove."+this.widgetName,this._touchMoveDelegate).bind("touchend."+this.widgetName,this._touchEndDelegate)}},_touchEnd:function(b){this._fillTouchEvent(b);this._mouseUp(b);a(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate);this._mouseDownEvent=!1;a(document).trigger("mouseup")},_touchMove:function(b){b.preventDefault();this._fillTouchEvent(b);return this._mouseMove(b)},_fillTouchEvent:function(d){var c;c=typeof d.targetTouches==="undefined"&&typeof d.changedTouches==="undefined"?d.originalEvent.targetTouches[0]||d.originalEvent.changedTouches[0]:d.targetTouches[0]||d.changedTouches[0];d.pageX=c.pageX;d.pageY=c.pageY}})})(jQuery);(function(a){a.widget("ui.rangeSliderDraggable",a.ui.rangeSliderMouseTouch,{cache:null,options:{containment:null},_create:function(){setTimeout(a.proxy(this._initElement,this),10)},_initElement:function(){this._mouseInit();this._cache()},_setOption:function(d,c){if(d=="containment"){this.options.containment=c===null||a(c).length==0?null:a(c)}},_mouseStart:function(b){this._cache();this.cache.click={left:b.pageX,top:b.pageY};this.cache.initialOffset=this.element.offset();this._triggerMouseEvent("mousestart");return !0},_mouseDrag:function(b){b=b.pageX-this.cache.click.left;b=this._constraintPosition(b+this.cache.initialOffset.left);this._applyPosition(b);this._triggerMouseEvent("drag");return !1},_mouseStop:function(){this._triggerMouseEvent("stop")},_constraintPosition:function(b){this.element.parent().length!==0&&(b=Math.min(b,this.cache.parent.offset.left+this.cache.parent.width-this.cache.width.outer),b=Math.max(b,this.cache.parent.offset.left));return b},_applyPosition:function(d){var c={top:this.cache.offset.top,left:d};this.element.offset({left:d});this.cache.offset=c},_cacheIfNecessary:function(){this.cache===null&&this._cache()},_cache:function(){this.cache={};this._cacheMargins();this._cacheParent();this._cacheDimensions();this.cache.offset=this.element.offset()},_cacheMargins:function(){this.cache.margin={left:this._parsePixels(this.element,"marginLeft"),right:this._parsePixels(this.element,"marginRight"),top:this._parsePixels(this.element,"marginTop"),bottom:this._parsePixels(this.element,"marginBottom")}},_cacheParent:function(){if(this.options.parent!==null){var b=this.element.parent();this.cache.parent={offset:b.offset(),width:b.width()}}else{this.cache.parent=null}},_cacheDimensions:function(){this.cache.width={outer:this.element.outerWidth(),inner:this.element.width()}},_parsePixels:function(d,c){return parseInt(d.css(c),10)||0},_triggerMouseEvent:function(d){var c=this._prepareEventData();this.element.trigger(d,c)},_prepareEventData:function(){return{element:this.element,offset:this.cache.offset||null}}})})(jQuery);(function(a){a.widget("ui.rangeSliderBar",a.ui.rangeSliderDraggable,{options:{leftHandle:null,rightHandle:null,bounds:{min:0,max:100},type:"rangeSliderHandle",range:!1,drag:function(){},stop:function(){},values:{min:0,max:20},wheelSpeed:4,wheelMode:null},_values:{min:0,max:20},_waitingToInit:2,_wheelTimeout:!1,_create:function(){a.ui.rangeSliderDraggable.prototype._create.apply(this);this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-bar");this.options.leftHandle.bind("initialize",a.proxy(this._onInitialized,this)).bind("mousestart",a.proxy(this._cache,this)).bind("stop",a.proxy(this._onHandleStop,this));this.options.rightHandle.bind("initialize",a.proxy(this._onInitialized,this)).bind("mousestart",a.proxy(this._cache,this)).bind("stop",a.proxy(this._onHandleStop,this));this._bindHandles();this._values=this.options.values},_setOption:function(d,c){d==="range"?this._setRangeOption(c):d==="wheelSpeed"?this._setWheelSpeedOption(c):d==="wheelMode"&&this._setWheelModeOption(c)},_setRangeOption:function(b){if(typeof b!="object"||b===null){b=!1}if(!(b===!1&&this.options.range===!1)){this.options.range=b!==!1?{min:typeof b.min==="undefined"?this.options.range.min||!1:b.min,max:typeof b.max==="undefined"?this.options.range.max||!1:b.max}:!1,this._setLeftRange(),this._setRightRange()}},_setWheelSpeedOption:function(b){if(typeof b==="number"&&b>0){this.options.wheelSpeed=b}},_setWheelModeOption:function(b){if(b===null||b===!1||b==="zoom"||b==="scroll"){this.options.wheelMode!==b&&this.element.parent().unbind("mousewheel.bar"),this._bindMouseWheel(b),this.options.wheelMode=b}},_bindMouseWheel:function(b){b==="zoom"?this.element.parent().bind("mousewheel.bar",a.proxy(this._mouseWheelZoom,this)):b==="scroll"&&this.element.parent().bind("mousewheel.bar",a.proxy(this._mouseWheelScroll,this))},_setLeftRange:function(){if(this.options.range==!1){return !1}var d=this._values.max,c={min:!1,max:!1};c.max=(this.options.range.min||!1)!==!1?this._leftHandle("substract",d,this.options.range.min):!1;c.min=(this.options.range.max||!1)!==!1?this._leftHandle("substract",d,this.options.range.max):!1;this._leftHandle("option","range",c)},_setRightRange:function(){var d=this._values.min,c={min:!1,max:!1};c.min=(this.options.range.min||!1)!==!1?this._rightHandle("add",d,this.options.range.min):!1;c.max=(this.options.range.max||!1)!==!1?this._rightHandle("add",d,this.options.range.max):!1;this._rightHandle("option","range",c)},_deactivateRange:function(){this._leftHandle("option","range",!1);this._rightHandle("option","range",!1)},_reactivateRange:function(){this._setRangeOption(this.options.range)},_onInitialized:function(){this._waitingToInit--;this._waitingToInit===0&&this._initMe()},_initMe:function(){this._cache();this.min(this.options.values.min);this.max(this.options.values.max);var d=this._leftHandle("position"),c=this._rightHandle("position")+this.options.rightHandle.width();this.element.offset({left:d});this.element.css("width",c-d)},_leftHandle:function(){return this._handleProxy(this.options.leftHandle,arguments)},_rightHandle:function(){return this._handleProxy(this.options.rightHandle,arguments)},_handleProxy:function(e,d){var f=Array.prototype.slice.call(d);return e[this.options.type].apply(e,f)},_cache:function(){a.ui.rangeSliderDraggable.prototype._cache.apply(this);this._cacheHandles()},_cacheHandles:function(){this.cache.rightHandle={};this.cache.rightHandle.width=this.options.rightHandle.width();this.cache.rightHandle.offset=this.options.rightHandle.offset();this.cache.leftHandle={};this.cache.leftHandle.offset=this.options.leftHandle.offset()},_mouseStart:function(b){a.ui.rangeSliderDraggable.prototype._mouseStart.apply(this,[b]);this._deactivateRange()},_mouseStop:function(b){a.ui.rangeSliderDraggable.prototype._mouseStop.apply(this,[b]);this._cacheHandles();this._values.min=this._leftHandle("value");this._values.max=this._rightHandle("value");this._reactivateRange();this._leftHandle().trigger("stop");this._rightHandle().trigger("stop")},_onDragLeftHandle:function(d,c){this._cacheIfNecessary();this._switchedValues()?(this._switchHandles(),this._onDragRightHandle(d,c)):(this._values.min=c.value,this.cache.offset.left=c.offset.left,this.cache.leftHandle.offset=c.offset,this._positionBar())},_onDragRightHandle:function(d,c){this._cacheIfNecessary();this._switchedValues()?(this._switchHandles(),this._onDragLeftHandle(d,c)):(this._values.max=c.value,this.cache.rightHandle.offset=c.offset,this._positionBar())},_positionBar:function(){var b=this.cache.rightHandle.offset.left+this.cache.rightHandle.width-this.cache.leftHandle.offset.left;this.cache.width.inner=b;this.element.css("width",b).offset({left:this.cache.leftHandle.offset.left})},_onHandleStop:function(){this._setLeftRange();this._setRightRange()},_switchedValues:function(){if(this.min()>this.max()){var b=this._values.min;this._values.min=this._values.max;this._values.max=b;return !0}return !1},_switchHandles:function(){var b=this.options.leftHandle;this.options.leftHandle=this.options.rightHandle;this.options.rightHandle=b;this._leftHandle("option","isLeft",!0);this._rightHandle("option","isLeft",!1);this._bindHandles();this._cacheHandles()},_bindHandles:function(){this.options.leftHandle.unbind(".bar").bind("drag.bar update.bar moving.bar",a.proxy(this._onDragLeftHandle,this));this.options.rightHandle.unbind(".bar").bind("drag.bar update.bar moving.bar",a.proxy(this._onDragRightHandle,this))},_constraintPosition:function(d){var c={};c.left=a.ui.rangeSliderDraggable.prototype._constraintPosition.apply(this,[d]);c.left=this._leftHandle("position",c.left);d=this._rightHandle("position",c.left+this.cache.width.outer-this.cache.rightHandle.width);c.width=d-c.left+this.cache.rightHandle.width;return c},_applyPosition:function(b){a.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[b.left]);this.element.width(b.width)},_mouseWheelZoom:function(f,c,g,h){f=this._values.min+(this._values.max-this._values.min)/2;c={};g={};this.options.range===!1||this.options.range.min===!1?(c.max=f,g.min=f):(c.max=f-this.options.range.min/2,g.min=f+this.options.range.min/2);if(this.options.range!==!1&&this.options.range.max!==!1){c.min=f-this.options.range.max/2,g.max=f+this.options.range.max/2}this._leftHandle("option","range",c);this._rightHandle("option","range",g);clearTimeout(this._wheelTimeout);this._wheelTimeout=setTimeout(a.proxy(this._wheelStop,this),200);this.zoomOut(h*this.options.wheelSpeed);return !1},_mouseWheelScroll:function(f,c,g,h){this._wheelTimeout===!1?this.startScroll():clearTimeout(this._wheelTimeout);this._wheelTimeout=setTimeout(a.proxy(this._wheelStop,this),200);this.scrollLeft(h*this.options.wheelSpeed);return !1},_wheelStop:function(){this.stopScroll();this._wheelTimeout=!1},min:function(b){return this._leftHandle("value",b)},max:function(b){return this._rightHandle("value",b)},startScroll:function(){this._deactivateRange()},stopScroll:function(){this._reactivateRange();this._triggerMouseEvent("stop")},scrollLeft:function(b){b=b||1;if(b<0){return this.scrollRight(-b)}b=this._leftHandle("moveLeft",b);this._rightHandle("moveLeft",b);this.update();this._triggerMouseEvent("scroll")},scrollRight:function(b){b=b||1;if(b<0){return this.scrollLeft(-b)}b=this._rightHandle("moveRight",b);this._leftHandle("moveRight",b);this.update();this._triggerMouseEvent("scroll")},zoomIn:function(d){d=d||1;if(d<0){return this.zoomOut(-d)}var c=this._rightHandle("moveLeft",d);d>c&&(c/=2,this._rightHandle("moveRight",c));this._leftHandle("moveRight",c);this.update();this._triggerMouseEvent("zoom")},zoomOut:function(d){d=d||1;if(d<0){return this.zoomIn(-d)}var c=this._rightHandle("moveRight",d);d>c&&(c/=2,this._rightHandle("moveLeft",c));this._leftHandle("moveLeft",c);this.update();this._triggerMouseEvent("zoom")},values:function(f,e){if(typeof f!=="undefined"&&typeof e!=="undefined"){var h=Math.min(f,e),g=Math.max(f,e);this._deactivateRange();this.options.leftHandle.unbind(".bar");this.options.rightHandle.unbind(".bar");this._values.min=this._leftHandle("value",h);this._values.max=this._rightHandle("value",g);this._bindHandles();this._reactivateRange();this.update()}return{min:this._values.min,max:this._values.max}},update:function(){this._values.min=this.min();this._values.max=this.max();this._cache();this._positionBar()}})})(jQuery);(function(d){function b(c,h,i,g){this.label1=c;this.label2=h;this.type=i;this.options=g;this.handle1=this.label1[this.type]("option","handle");this.handle2=this.label2[this.type]("option","handle");this.cache=null;this.left=c;this.right=h;this.moving=!1;this.Init=function(){this.BindHandle(this.handle1);this.BindHandle(this.handle2);this.options.show==="show"&&setTimeout(d.proxy(this.PositionLabels,this),1)};this.Cache=function(){this.cache={};this.cache.label1={};this.cache.label2={};this.cache.handle1={};this.cache.handle2={};this.CacheElement(this.label1,this.cache.label1);this.CacheElement(this.label2,this.cache.label2);this.CacheElement(this.handle1,this.cache.handle1);this.CacheElement(this.handle2,this.cache.handle2)};this.CacheIfNecessary=function(){this.cache===null?this.Cache():(this.CacheWidth(this.label1,this.cache.label1),this.CacheWidth(this.label2,this.cache.label2),this.CacheHeight(this.label1,this.cache.label1),this.CacheHeight(this.label2,this.cache.label2))};this.CacheElement=function(f,e){this.CacheWidth(f,e);this.CacheHeight(f,e);e.offset=f.offset();e.margin={left:this.ParsePixels("marginLeft",f),right:this.ParsePixels("marginRight",f)};e.border={left:this.ParsePixels("borderLeftWidth",f),right:this.ParsePixels("borderRightWidth",f)};e.outerWidth=e.width+e.margin.left+e.margin.right+e.border.left+e.border.right};this.CacheWidth=function(f,e){e.width=f.width();e.outerWidth=f.outerWidth()};this.CacheHeight=function(f,e){e.outerHeightMargin=f.outerHeight(!0)};this.ParsePixels=function(f,e){return parseInt(e.css(f),10)||0};this.BindHandle=function(e){e.bind("moving update",d.proxy(this.onHandleMoving,this));e.bind("stop",d.proxy(this.onHandleStop,this))};this.PositionLabels=function(){this.CacheIfNecessary();var f=this.GetRawPosition(this.cache.label1,this.cache.handle1),e=this.GetRawPosition(this.cache.label2,this.cache.handle2);this.ConstraintPositions(f,e);this.label1.offset({left:f.left});this.label2.offset({left:e.left})};this.ConstraintPositions=function(f,e){f.center<e.center&&f.outerRight>e.outerLeft?(f=this.getLeftPosition(f,e),this.getRightPosition(f,e)):f.center>e.center&&e.outerRight>f.outerLeft&&(e=this.getLeftPosition(e,f),this.getRightPosition(e,f))};this.getLeftPosition=function(f,e){f.left=(e.center+f.center)/2-f.cache.outerWidth-f.cache.margin.right+f.cache.border.left;return f};this.getRightPosition=function(f,e){e.left=(e.center+f.center)/2+e.cache.margin.left+e.cache.border.left;return e};this.ShowIfNecessary=function(){if(!(this.options.show==="show"||this.moving)){this.label1.stop().fadeIn(this.options.durationIn||0),this.label2.stop().fadeIn(this.options.durationIn||0),this.moving=!0}};this.HideIfNeeded=function(){if(this.moving===!0){this.label1.stop().delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.label2.stop().delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.moving=!1}};this.onHandleMoving=function(f,e){this.CacheIfNecessary();this.ShowIfNecessary();this.UpdateHandlePosition(e);this.PositionLabels()};this.onHandleStop=function(){this.HideIfNeeded()};this.UpdateHandlePosition=function(e){e.element[0]==this.handle1[0]?this.UpdatePosition(e,this.cache.handle1):this.UpdatePosition(e,this.cache.handle2)};this.UpdatePosition=function(f,e){e.offset=f.offset};this.GetRawPosition=function(j,f){var m=f.offset.left+f.outerWidth/2,k=m-j.outerWidth/2,l=k-j.margin.left-j.border.left;return{left:k,outerLeft:l,top:f.offset.top-j.outerHeightMargin,right:k+j.outerWidth-j.border.left-j.border.right,outerRight:l+j.outerWidth+j.margin.left+j.margin.right,cache:j,center:m}};this.Init()}d.widget("ui.rangeSliderLabel",{options:{handle:null,formatter:!1,handleType:"rangeSliderHandle",show:"show",durationIn:0,durationOut:500,delayOut:500,isLeft:!1},cache:null,_positionner:null,_valueContainer:null,_innerElement:null,_create:function(){this.options.isLeft=this._handle("option","isLeft");this.element.addClass("ui-rangeSlider-label").css("position","absolute").css("display","block");this._valueContainer=d("<div class='ui-rangeSlider-label-value' />").appendTo(this.element);this._innerElement=d("<div class='ui-rangeSlider-label-inner' />").appendTo(this.element);this._toggleClass();this.options.handle.bind("moving",d.proxy(this._onMoving,this)).bind("update",d.proxy(this._onUpdate,this)).bind("switch",d.proxy(this._onSwitch,this));this.options.show!=="show"&&this.element.hide()},_handle:function(){return this.options.handle[this.options.handleType].apply(this.options.handle,Array.prototype.slice.apply(arguments))},_setOption:function(e,f){e==="show"?this._updateShowOption(f):(e==="durationIn"||e==="durationOut"||e==="delayOut")&&this._updateDurations(e,f)},_updateShowOption:function(c){this.options.show=c;this.options.show!=="show"?this.element.hide():(this.element.show(),this._display(this.options.handle[this.options.handleType]("value")),this._positionner.PositionLabels());this._positionner.options.show=this.options.show},_updateDurations:function(e,f){parseInt(f)===f&&(this._positionner.options[e]=f,this.options[e]=f)},_display:function(c){this.options.formatter==!1?this._displayText(Math.round(c)):this._displayText(this.options.formatter(c))},_displayText:function(c){this._valueContainer.text(c)},_toggleClass:function(){this.element.toggleClass("ui-rangeSlider-leftLabel",this.options.isLeft).toggleClass("ui-rangeSlider-rightLabel",!this.options.isLeft)},_onMoving:function(e,f){this._display(f.value)},_onUpdate:function(e,f){this.options.show==="show"&&this._display(f.value)},_onSwitch:function(e,f){this.options.isLeft=f;this._toggleClass();this._positionner.PositionLabels()},pair:function(a){if(this._positionner==null){this._positionner=new b(this.element,a,this.widgetName,{show:this.options.show,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}),a[this.widgetName]("positionner",this._positionner)}},positionner:function(c){if(typeof c!=="undefined"){this._positionner=c}return this._positionner},update:function(){this._display(this._handle("value"));this._positionner.PositionLabels()}})})(jQuery);(function(a){a.widget("ui.rangeSliderHandle",a.ui.rangeSliderDraggable,{currentMove:null,margin:0,parentElement:null,options:{isLeft:!0,bounds:{min:0,max:100},range:!1,value:0,step:!1},_value:0,_left:0,_create:function(){a.ui.rangeSliderDraggable.prototype._create.apply(this);this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-handle").toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft);this._value=this.options.value},_setOption:function(d,c){if(d==="isLeft"&&(c===!0||c===!1)&&c!=this.options.isLeft){this.options.isLeft=c,this.element.toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this._position(this._value),this.element.trigger("switch",this.options.isLeft)}else{if(d==="step"&&this._checkStep(c)){this.options.step=c,this.update()}else{if(d==="bounds"){this.options.bounds=c,this.update()}else{if(d==="range"&&this._checkRange(c)){this.options.range=c,this.update()}}}}a.ui.draggable.prototype._setOption.apply(this,[d,c])},_checkRange:function(b){return b===!1||(typeof b.min==="undefined"||b.min===!1||parseFloat(b.min)===b.min)&&(typeof b.max==="undefined"||b.max===!1||parseFloat(b.max)===b.max)},_checkStep:function(b){return b===!1||parseFloat(b)==b},_initElement:function(){a.ui.rangeSliderDraggable.prototype._initElement.apply(this);this.cache.parent.width===0||this.cache.parent.width===null?setTimeout(a.proxy(this._initElement,this),500):(this._position(this.options.value),this._triggerMouseEvent("initialize"))},_bounds:function(){return this.options.bounds},_cache:function(){a.ui.rangeSliderDraggable.prototype._cache.apply(this);this._cacheParent()},_cacheParent:function(){var b=this.element.parent();this.cache.parent={element:b,offset:b.offset(),padding:{left:this._parsePixels(b,"paddingLeft")},width:b.width()}},_position:function(b){this._applyPosition(this._getPositionForValue(b))},_constraintPosition:function(b){return this._getPositionForValue(this._getValueForPosition(b))},_applyPosition:function(b){a.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[b]);this._left=b;this._setValue(this._getValueForPosition(b));this._triggerMouseEvent("moving")},_prepareEventData:function(){var b=a.ui.rangeSliderDraggable.prototype._prepareEventData.apply(this);b.value=this._value;return b},_setValue:function(b){if(b!=this._value){this._value=b}},_constraintValue:function(e){e=Math.min(e,this._bounds().max);e=Math.max(e,this._bounds().min);e=this._round(e);if(this.options.range!==!1){var d=this.options.range.min||!1,f=this.options.range.max||!1;d!==!1&&(e=Math.max(e,this._round(d)));f!==!1&&(e=Math.min(e,this._round(f)))}return e},_round:function(b){if(this.options.step!==!1&&this.options.step>0){return Math.round(b/this.options.step)*this.options.step}return b},_getPositionForValue:function(d){if(this.cache.parent.offset==null){return 0}var d=this._constraintValue(d),d=(d-this.options.bounds.min)/(this.options.bounds.max-this.options.bounds.min),c=this.cache.parent.offset.left;this.options.isLeft||(c-=this.cache.width.outer);return c+d*this.cache.parent.width},_getValueForPosition:function(b){this.options.isLeft||(b+=this.cache.width.outer);return this._constraintValue((b-this.cache.parent.offset.left)/this.cache.parent.width*(this.options.bounds.max-this.options.bounds.min)+this.options.bounds.min)},value:function(b){typeof b!="undefined"&&(this._cache(),b=this._constraintValue(b),this._position(b));return this._value},update:function(){this._cache();var d=this._constraintValue(this._value),c=this._getPositionForValue(d);d!=this._value?(this._position(d),this._triggerMouseEvent("update")):c!=this.cache.offset.left&&(this._position(d),this._triggerMouseEvent("update"))},position:function(b){typeof b!="undefined"&&(this._cache(),b=this._constraintPosition(b),this._applyPosition(b));return this._left},add:function(d,c){return d+c},substract:function(d,c){return d-c},stepsBetween:function(d,c){if(this.options.step===!1){return c-d}return(c-d)/this.options.step},multiplyStep:function(d,c){return d*c},moveRight:function(d){var c;if(this.options.step==!1){return c=this._left,this.position(this._left+d),this._left-c}c=this._value;this.value(this.add(c,this.multiplyStep(this.options.step,d)));return this.stepsBetween(c,this._value)},moveLeft:function(b){return -this.moveRight(-b)},stepRatio:function(){return this.options.step==!1?1:this.cache.parent.width/((this.options.bounds.max-this.options.bounds.min)/this.options.step)}})})(jQuery);(function(a){a.widget("ui.rangeSlider",{options:{bounds:{min:0,max:100},defaultValues:{min:20,max:50},wheelMode:null,wheelSpeed:4,arrows:!0,valueLabels:"show",formatter:null,durationIn:0,durationOut:400,delayOut:200,range:{min:!1,max:!1},step:!1},_values:null,_valuesChanged:!1,bar:null,leftHandle:null,rightHandle:null,innerBar:null,container:null,arrows:null,labels:null,changing:{min:!1,max:!1},changed:{min:!1,max:!1},_create:function(){this._values={min:this.options.defaultValues.min,max:this.options.defaultValues.max};this.labels={left:null,right:null,leftDisplayed:!0,rightDisplayed:!0};this.arrows={left:null,right:null};this.changing={min:!1,max:!1};this.changed={min:!1,max:!1};this.element.css("position")!=="absolute"&&this.element.css("position","relative");this.container=a("<div class='ui-rangeSlider-container' />").css("position","absolute").appendTo(this.element);this.innerBar=a("<div class='ui-rangeSlider-innerBar' />").css("position","absolute").css("top",0).css("left",0);this.leftHandle=this._createHandle({isLeft:!0,bounds:this.options.bounds,value:this.options.defaultValues.min,step:this.options.step}).appendTo(this.container);this.rightHandle=this._createHandle({isLeft:!1,bounds:this.options.bounds,value:this.options.defaultValues.max,step:this.options.step}).appendTo(this.container);this._createBar();this.container.prepend(this.innerBar);this.arrows.left=this._createArrow("left");this.arrows.right=this._createArrow("right");this.element.addClass("ui-rangeSlider");this.options.arrows?this.element.addClass("ui-rangeSlider-withArrows"):(this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.element.addClass("ui-rangeSlider-noArrow"));this.options.valueLabels!=="hide"?this._createLabels():this._destroyLabels();this._bindResize();setTimeout(a.proxy(this.resize,this),1);setTimeout(a.proxy(this._initValues,this),1)},_bindResize:function(){var b=this;this._resizeProxy=function(c){b.resize(c)};a(window).resize(this._resizeProxy)},_initWidth:function(){this.container.css("width",this.element.width()-this.container.outerWidth(!0)+this.container.width());this.innerBar.css("width",this.container.width()-this.innerBar.outerWidth(!0)+this.innerBar.width())},_initValues:function(){this.values(this.options.defaultValues.min,this.options.defaultValues.max)},_setOption:function(d,c){if(d==="defaultValues"){if(typeof c.min!=="undefined"&&typeof c.max!=="undefined"&&parseFloat(c.min)===c.min&&parseFloat(c.max)===c.max){this.options.defaultValues=c}}else{if(d==="wheelMode"||d==="wheelSpeed"){this._bar("option",d,c),this.options[d]=this._bar("option",d)}else{if(d==="arrows"&&(c===!0||c===!1)&&c!==this.options.arrows){this._setArrowsOption(c)}else{if(d==="valueLabels"){this._setLabelsOption(c)}else{if(d==="durationIn"||d==="durationOut"||d==="delayOut"){this._setLabelsDurations(d,c)}else{if(d==="formatter"&&c!==null&&typeof c==="function"){this.options.formatter=c,this.options.valueLabels!=="hide"&&(this._destroyLabels(),this._createLabels())}else{if(d==="bounds"&&typeof c.min!=="undefined"&&typeof c.max!=="undefined"){this.bounds(c.min,c.max)}else{if(d==="range"){this._bar("option","range",c),this.options.range=this._bar("option","range"),this._changed(!0)}else{if(d==="step"){this.options.step=c,this._leftHandle("option","step",c),this._rightHandle("option","step",c),this._changed(!0)}}}}}}}}}},_validProperty:function(e,d,f){if(e===null||typeof e[d]==="undefined"){return f}return e[d]},_setLabelsOption:function(b){if(!(b!=="hide"&&b!=="show"&&b!=="change")){this.options.valueLabels=b,b!=="hide"?(this._createLabels(),this._leftLabel("update"),this._rightLabel("update")):this._destroyLabels()}},_setArrowsOption:function(b){if(b===!0){this.element.removeClass("ui-rangeSlider-noArrow").addClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","block"),this.arrows.right.css("display","block"),this.options.arrows=!0}else{if(b===!1){this.element.addClass("ui-rangeSlider-noArrow").removeClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.options.arrows=!1}}this._initWidth()},_setLabelsDurations:function(d,c){parseInt(c,10)===c&&(this.labels.left!==null&&this._leftLabel("option",d,c),this.labels.right!==null&&this._rightLabel("option",d,c),this.options[d]=c)},_createHandle:function(b){return a("<div />")[this._handleType()](b).bind("drag",a.proxy(this._changing,this)).bind("stop",a.proxy(this._changed,this))},_createBar:function(){this.bar=a("<div />").prependTo(this.container).bind("drag scroll zoom",a.proxy(this._changing,this)).bind("stop",a.proxy(this._changed,this));this._bar({leftHandle:this.leftHandle,rightHandle:this.rightHandle,values:{min:this.options.defaultValues.min,max:this.options.defaultValues.max},type:this._handleType(),range:this.options.range});this.options.range=this._bar("option","range")},_createArrow:function(d){var c=a("<div class='ui-rangeSlider-arrow' />").append("<div class='ui-rangeSlider-arrow-inner' />").addClass("ui-rangeSlider-"+d+"Arrow").css("position","absolute").css(d,0).appendTo(this.element),d=d==="right"?a.proxy(this._scrollRightClick,this):a.proxy(this._scrollLeftClick,this);c.bind("mousedown touchstart",d);return c},_proxy:function(e,d,f){f=Array.prototype.slice.call(f);return e[d].apply(e,f)},_handleType:function(){return"rangeSliderHandle"},_barType:function(){return"rangeSliderBar"},_bar:function(){return this._proxy(this.bar,this._barType(),arguments)},_labelType:function(){return"rangeSliderLabel"},_leftLabel:function(){return this._proxy(this.labels.left,this._labelType(),arguments)},_rightLabel:function(){return this._proxy(this.labels.right,this._labelType(),arguments)},_leftHandle:function(){return this._proxy(this.leftHandle,this._handleType(),arguments)},_rightHandle:function(){return this._proxy(this.rightHandle,this._handleType(),arguments)},_getValue:function(d,c){c===this.rightHandle&&(d-=c.outerWidth());return d*(this.options.bounds.max-this.options.bounds.min)/(this.container.innerWidth()-c.outerWidth(!0))+this.options.bounds.min},_trigger:function(d){var c=this;setTimeout(function(){c.element.trigger(d,{label:c.element,values:c.values()})},1)},_changing:function(){if(this._updateValues()){this._trigger("valuesChanging"),this._valuesChanged=!0}},_changed:function(b){if(this._updateValues()||this._valuesChanged){this._trigger("valuesChanged"),b!==!0&&this._trigger("userValuesChanged"),this._valuesChanged=!1}},_updateValues:function(){var f=this._leftHandle("value"),e=this._rightHandle("value"),h=this._min(f,e),g=this._max(f,e),h=h!==this._values.min||g!==this._values.max;this._values.min=this._min(f,e);this._values.max=this._max(f,e);return h},_min:function(d,c){return Math.min(d,c)},_max:function(d,c){return Math.max(d,c)},_createLabel:function(d,c){var f;d===null?(f=this._getLabelConstructorParameters(d,c),d=a("<div />").appendTo(this.element)[this._labelType()](f)):(f=this._getLabelRefreshParameters(d,c),d[this._labelType()](f));return d},_getLabelConstructorParameters:function(d,c){return{handle:c,handleType:this._handleType(),formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getLabelRefreshParameters:function(){return{formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getFormatter:function(){if(this.options.formatter===!1||this.options.formatter===null){return this._defaultFormatter}return this.options.formatter},_defaultFormatter:function(b){return Math.round(b)},_destroyLabel:function(b){b!==null&&(b.remove(),b=null);return b},_createLabels:function(){this.labels.left=this._createLabel(this.labels.left,this.leftHandle);this.labels.right=this._createLabel(this.labels.right,this.rightHandle);this._leftLabel("pair",this.labels.right)},_destroyLabels:function(){this.labels.left=this._destroyLabel(this.labels.left);this.labels.right=this._destroyLabel(this.labels.right)},_stepRatio:function(){return this._leftHandle("stepRatio")},_scrollRightClick:function(b){b.preventDefault();this._bar("startScroll");this._bindStopScroll();this._continueScrolling("scrollRight",4*this._stepRatio(),1)},_continueScrolling:function(h,e,l,k){this._bar(h,l);k=k||5;k--;var j=this,i=Math.max(1,4/this._stepRatio());this._scrollTimeout=setTimeout(function(){k===0&&(e>16?e=Math.max(16,e/1.5):l=Math.min(i,l*2),k=5);j._continueScrolling(h,e,l,k)},e)},_scrollLeftClick:function(b){b.preventDefault();this._bar("startScroll");this._bindStopScroll();this._continueScrolling("scrollLeft",4*this._stepRatio(),1)},_bindStopScroll:function(){var b=this;this._stopScrollHandle=function(c){c.preventDefault();b._stopScroll()};a(document).bind("mouseup touchend",this._stopScrollHandle)},_stopScroll:function(){a(document).unbind("mouseup touchend",this._stopScrollHandle);this._bar("stopScroll");clearTimeout(this._scrollTimeout)},values:function(e,d){var f=this._bar("values",e,d);typeof e!=="undefined"&&typeof d!=="undefined"&&this._changed(!1);return f},min:function(b){this._values.min=this.values(b,this._values.max).min;return this._values.min},max:function(b){this._values.max=this.values(this._values.min,b).max;return this._values.max},bounds:function(d,c){typeof d!=="undefined"&&typeof c!=="undefined"&&parseFloat(d)===d&&parseFloat(c)===c&&d<c&&(this._setBounds(d,c),this._changed(!0));return this.options.bounds},_setBounds:function(d,c){this.options.bounds={min:d,max:c};this._leftHandle("option","bounds",this.options.bounds);this._rightHandle("option","bounds",this.options.bounds);this._bar("option","bounds",this.options.bounds)},zoomIn:function(b){this._bar("zoomIn",b)},zoomOut:function(b){this._bar("zoomOut",b)},scrollLeft:function(b){this._bar("startScroll");this._bar("scrollLeft",b);this._bar("stopScroll")},scrollRight:function(b){this._bar("startScroll");this._bar("scrollRight",b);this._bar("stopScroll")},resize:function(){this._initWidth();this._leftHandle("update");this._rightHandle("update")},destroy:function(){this.element.removeClass("ui-rangeSlider-withArrows").removeClass("ui-rangeSlider-noArrow");this.bar.detach();this.leftHandle.detach();this.rightHandle.detach();this.innerBar.detach();this.container.detach();this.arrows.left.detach();this.arrows.right.detach();this.element.removeClass("ui-rangeSlider");this._destroyLabels();delete this.options;a(window).unbind("resize",this._resizeProxy);a.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);(function(a){a.widget("ui.dateRangeSliderHandle",a.ui.rangeSliderHandle,{_steps:!1,_boundsValues:{},_create:function(){a.ui.rangeSliderHandle.prototype._create.apply(this);this._createBoundsValues()},_getValueForPosition:function(e){var d=this.options.bounds.min.valueOf(),f=this.options.bounds.max.valueOf();this.options.isLeft||(e+=this.cache.width.outer);return this._constraintValue(new Date((e-this.cache.parent.offset.left)/this.cache.parent.width*(f-d)+d))},_setOption:function(d,c){d==="step"?(this.options.step=c,this._createSteps(),this.update()):(a.ui.rangeSliderHandle.prototype._setOption.apply(this,[d,c]),d==="bounds"&&this._createBoundsValues())},_createBoundsValues:function(){this._boundsValues={min:this.options.bounds.min.valueOf(),max:this.options.bounds.max.valueOf()}},_bounds:function(){return this._boundsValues},_createSteps:function(){if(this.options.step===!1||!this._isValidStep()){this._steps=!1}else{var f=new Date(this.options.bounds.min),e=new Date(this.options.bounds.max),h=f,g=0;for(this._steps=[];h<=e;){this._steps.push(h.valueOf()),h=this._addStep(f,g,this.options.step),g++}}},_isValidStep:function(){return typeof this.options.step==="object"},_addStep:function(e,d,f){e=new Date(e.valueOf());e=this._addThing(e,"FullYear",d,f.years);e=this._addThing(e,"Month",d,f.months);e=this._addThing(e,"Date",d,f.days);e=this._addThing(e,"Hours",d,f.hours);e=this._addThing(e,"Minutes",d,f.minutes);return e=this._addThing(e,"Seconds",d,f.seconds)},_addThing:function(f,e,h,g){if(h===0||(g||0)===0){return f}f["set"+e](f["get"+e]()+h*(g||0));return f},_round:function(e){if(this._steps===!1){return e}for(var d=this.options.bounds.min.valueOf(),f=Math.floor(this._steps.length*((e-d)/(this.options.bounds.max.valueOf()-d)));this._steps[f]>e;){f--}for(;f+1<this._steps.length&&this._steps[f+1]<=e;){f++}if(f>=this._steps.length-1){return this._steps[this._steps.length-1]}else{if(f==0){return this._steps[0]}}d=this._steps[f];f=this._steps[f+1];if(e-d<f-e){return d}return f},update:function(){this._createBoundsValues();this._createSteps();a.ui.rangeSliderHandle.prototype.update.apply(this)},add:function(d,c){return this._addStep(new Date(d),1,c).valueOf()},substract:function(d,c){return this._addStep(new Date(d),-1,c).valueOf()},stepsBetween:function(i,e){if(this.options.step===!1){return val2-val1}var n=Math.min(i,e),m=Math.max(i,e),l=0,k=!1,j=i>e;for(this.add(n,this.options.step)-n<0&&(k=!0);n<m;){k?m=this.add(m,this.options.step):n=this.add(n,this.options.step),l++}return j?-l:l},multiplyStep:function(f,e){var h={},g;for(g in f){h[g]=f[g]*e}return h},stepRatio:function(){return this.options.step==!1?1:this.cache.parent.width/this._steps.length}})})(jQuery);(function(a){a.widget("ui.dateRangeSlider",a.ui.rangeSlider,{options:{bounds:{min:new Date(2010,0,1),max:new Date(2012,0,1)},defaultValues:{min:new Date(2010,1,11),max:new Date(2011,1,11)}},_create:function(){a.ui.rangeSlider.prototype._create.apply(this);this.element.addClass("ui-dateRangeSlider")},destroy:function(){this.element.removeClass("ui-dateRangeSlider");a.ui.rangeSlider.prototype.destroy.apply(this)},_setOption:function(d,c){(d==="defaultValues"||d==="bounds")&&typeof c!=="undefined"&&c!==null&&typeof c.min!=="undefined"&&typeof c.max!=="undefined"&&c.min instanceof Date&&c.max instanceof Date?a.ui.rangeSlider.prototype._setOption.apply(this,[d,{min:c.min.valueOf(),max:c.max.valueOf()}]):a.ui.rangeSlider.prototype._setOption.apply(this,this._toArray(arguments))},_handleType:function(){return"dateRangeSliderHandle"},option:function(d){if(d==="bounds"||d==="defaultValues"){var c=a.ui.rangeSlider.prototype.option.apply(this,arguments);return{min:new Date(c.min),max:new Date(c.max)}}return a.ui.rangeSlider.prototype.option.apply(this,this._toArray(arguments))},_defaultFormatter:function(e){var d=e.getMonth()+1,f=e.getDate();return""+e.getFullYear()+"-"+(d<10?"0"+d:d)+"-"+(f<10?"0"+f:f)},_getFormatter:function(){var b=this.options.formatter;if(this.options.formatter===!1||this.options.formatter===null){b=this._defaultFormatter}return function(c){return function(d){return c(new Date(d))}}(b)},values:function(d,c){var f=null,f=typeof d!=="undefined"&&typeof c!=="undefined"&&d instanceof Date&&c instanceof Date?a.ui.rangeSlider.prototype.values.apply(this,[d.valueOf(),c.valueOf()]):a.ui.rangeSlider.prototype.values.apply(this,this._toArray(arguments));return{min:new Date(f.min),max:new Date(f.max)}},min:function(b){if(typeof b!=="undefined"&&b instanceof Date){return new Date(a.ui.rangeSlider.prototype.min.apply(this,[b.valueOf()]))}return new Date(a.ui.rangeSlider.prototype.min.apply(this))},max:function(b){if(typeof b!=="undefined"&&b instanceof Date){return new Date(a.ui.rangeSlider.prototype.max.apply(this,[b.valueOf()]))}return new Date(a.ui.rangeSlider.prototype.max.apply(this))},bounds:function(d,c){var f;f=typeof d!=="undefined"&&d instanceof Date&&typeof c!=="undefined"&&c instanceof Date?a.ui.rangeSlider.prototype.bounds.apply(this,[d.valueOf(),c.valueOf()]):a.ui.rangeSlider.prototype.bounds.apply(this,this._toArray(arguments));return{min:new Date(f.min),max:new Date(f.max)}},_toArray:function(b){return Array.prototype.slice.call(b)}})})(jQuery);(function(a){a.widget("ui.editRangeSliderLabel",a.ui.rangeSliderLabel,{options:{type:"text",step:!1,id:""},_input:null,_text:"",_create:function(){a.ui.rangeSliderLabel.prototype._create.apply(this);this._createInput()},_setOption:function(d,c){d==="type"?this._setTypeOption(c):d==="step"&&this._setStepOption(c);a.ui.rangeSliderLabel.prototype._setOption.apply(this,[d,c])},_createInput:function(){this._input=a("<input type='"+this.options.type+"' />").addClass("ui-editRangeSlider-inputValue").appendTo(this._valueContainer);this._setInputName();this._input.bind("keyup",a.proxy(this._onKeyUp,this));this._input.blur(a.proxy(this._onChange,this));this.options.type==="number"&&(this.options.step!==!1&&this._input.attr("step",this.options.step),this._input.click(a.proxy(this._onChange,this)));this._input.val(this._text)},_setInputName:function(){this._input.attr("name",this.options.id+(this.options.isLeft?"left":"right"))},_onSwitch:function(d,c){a.ui.rangeSliderLabel.prototype._onSwitch.apply(this,[d,c]);this._setInputName()},_destroyInput:function(){this._input.detach();this._input=null},_onKeyUp:function(b){if(b.which==13){return this._onChange(b),!1}},_onChange:function(){var b=this._returnCheckedValue(this._input.val());b!==!1&&this._triggerValue(b)},_triggerValue:function(b){this.element.trigger("valueChange",[{isLeft:this.options.handle[this.options.handleType]("option","isLeft"),value:b}])},_returnCheckedValue:function(d){var c=parseFloat(d);if(isNaN(c)||c.toString()!=d){return !1}return c},_setTypeOption:function(b){if((b==="text"||b==="number")&&this.options.type!=b){this._destroyInput(),this.options.type=b,this._createInput()}},_setStepOption:function(b){this.options.step=b;this.options.type==="number"&&this._input.attr("step",b!==!1?b:"any")},_displayText:function(b){this._input.val(b);this._text=b}})})(jQuery);(function(a){a.widget("ui.editRangeSlider",a.ui.rangeSlider,{options:{type:"text",round:1},_create:function(){a.ui.rangeSlider.prototype._create.apply(this);this.element.addClass("ui-editRangeSlider")},destroy:function(){this.element.removeClass("ui-editRangeSlider");a.ui.rangeSlider.prototype.destroy.apply(this)},_setOption:function(d,c){(d==="type"||d==="step")&&this._setLabelOption(d,c);d==="type"&&(this.options[d]=this.labels.left===null?c:this._leftLabel("option",d));a.ui.rangeSlider.prototype._setOption.apply(this,[d,c])},_setLabelOption:function(d,c){this.labels.left!==null&&(this._leftLabel("option",d,c),this._rightLabel("option",d,c))},_labelType:function(){return"editRangeSliderLabel"},_createLabel:function(d,c){var f=a.ui.rangeSlider.prototype._createLabel.apply(this,[d,c]);d===null&&f.bind("valueChange",a.proxy(this._onValueChange,this));return f},_addPropertiesToParameter:function(b){b.type=this.options.type;b.step=this.options.step;b.id=this.element.attr("id");return b},_getLabelConstructorParameters:function(d,c){return this._addPropertiesToParameter(a.ui.rangeSlider.prototype._getLabelConstructorParameters.apply(this,[d,c]))},_getLabelRefreshParameters:function(d,c){return this._addPropertiesToParameter(a.ui.rangeSlider.prototype._getLabelRefreshParameters.apply(this,[d,c]))},_onValueChange:function(d,c){c.isLeft?this.min(c.value):this.max(c.value)}})})(jQuery);