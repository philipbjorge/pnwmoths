(function(a,b){a.widget("ui.editRangeSlider",a.ui.rangeSlider,{options:{type:"text",round:1},_inputs:[],_create:function(){a.ui.rangeSlider.prototype._create.apply(this);this.element.addClass("ui-editRangeSlider")},destroy:function(){this.element.removeClass("ui-editRangeSlider");a.ui.rangeSlider.prototype.destroy.apply(this)},_setOption:function(c,d){if(c==="type"&&this._isValidInputType(d)){this.options.type=d;if(this.labels!=null){this._destroyLabels();this._createLabels()}}else{if(c==="round"&&this._isValidRoundValue(d)){this.options.round=d;this._fillInLabels()}}a.ui.rangeSlider.prototype._setOption.apply(this,[c,d])},_isValidInputType:function(c){return(c=="text"||c=="number")&&c!=this.options.type},_isValidRoundValue:function(c){return(typeof c==="number"&&c>0)||c===false},_createLabel:function(e,c){if(e==null){e=a.ui.rangeSlider.prototype._createLabel.apply(this,[e,c]);var d=a("<input type='"+this.options.type+"' class='ui-editRangeSlider-inputValue' />").attr("name",c);this._inputs.push(d);if(this.options.type==="number"){d.click(a.proxy(this._onChange,this))}d.keyup(a.proxy(this._onKeyUp,this));d.blur(a.proxy(this._onChange,this));e.append(d)}return e},_onChange:function(){if(this._inputs.length==2){var e=this._returnCheckedValue(this._inputs[0].val()),d=this._returnCheckedValue(this._inputs[1].val()),c;if(e!==false&&d!==false){c=this._returnCheckedValues(e,d);this.values(c.min,c.max)}}},_returnCheckedValue:function(d){var c=parseFloat(d);if(isNaN(c)||c.toString()!=d){return false}c=Math.min(this.options.bounds.max,c);c=Math.max(this.options.bounds.min,c);return c},_returnCheckedValues:function(g,d){var c={min:Math.min(g,d),max:Math.max(g,d)},h=c.max-c.min,f=this.values(),e=false;if(Math.abs(c.min-f.min)<Math.abs(c.max-f.max)){e=true}if(this.options.range.min!==false&&this.options.range.min>h){if(e){c.max=c.min+this.options.range.min}else{c.min=c.max-this.options.range.min}}else{if(this.options.range.max!==false&&this.options.range.max<h){if(e){c.max=c.min+this.options.range.max}else{c.min=c.max-this.options.range.max}}}return c},_onKeyUp:function(c){if(c.which==13){this._onChange(c);return false}},_destroyLabels:function(){this._inputs=[];a.ui.rangeSlider.prototype._destroyLabels.apply(this)},_fillInLabel:function(c,d){c.find("input").val(this._format(d))},_defaultFormat:function(c){if(this.options.round!==false){return Math.round(c/this.options.round)*this.options.round}return c}})})(jQuery);