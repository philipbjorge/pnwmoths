(function(a){if(!a.Indextank){a.Indextank=new Object()}a.Indextank.Sorting=function(c,b){var d=this;d.$el=a(c);d.el=c;d.$el.data("Indextank.Sorting",d);d.init=function(){d.options=a.extend({},a.Indextank.Sorting.defaultOptions,b);d.$el.bind("Indextank.AjaxSearch.success",d.trackQuery);var e=a("<div/>").append("Sort by ");a.each(d.options.labels,function(f,h){var g=a("<span/>").text(f);g.click(function(i){e.children().removeClass("selected");a(this).addClass("selected");if(d.query){query=d.query.clone().withScoringFunction(h);query.withStart(0);d.searcher.trigger("Indextank.AjaxSearch.runQuery",[query])}});e.append(g)});e.children(":not(:first)").prepend(" ",d.options.separator," ");d.$el.append(e)};d.trackQuery=function(e,f){d.query=f.query;d.searcher=f.searcher};d.destroy=function(){d.$el.unbind("Indextank.AjaxSearch.success",d.trackQuery);d.$el.removeData("Indextank.Sorting")};d.init()};a.Indextank.Sorting.defaultOptions={labels:{newest:0},separator:"|"};a.fn.indextank_Sorting=function(b){return this.each(function(){(new a.Indextank.Sorting(this,b))})}})(jQuery);