(function(a){if(!a.Indextank){a.Indextank=new Object()}a.Indextank.Pagination=function(c,b){var d=this;d.$el=a(c);d.el=c;d.$el.data("Indextank.Pagination",d);d.init=function(){d.options=a.extend({},a.Indextank.Pagination.defaultOptions,b);d.$el.bind("Indextank.AjaxSearch.success",function(e,h){d.$el.show();d.$el.html("");var j=Math.ceil(h.query.start/h.query.rsLength)+1;var k=Math.ceil(h.matches/h.query.rsLength);if(k<2){return}var l=a("<ul/>").addClass("pagination");l.append(d.options.formatPage(j,true));var m=[];for(i=0;i<d.options.maxPages;i++){m.push(i);m.push(-1*i)}var g=0;for(i=0;i<m.length;i++){if(g==d.options.maxPages-1){break}var f=j+m[i];if(m[i]<0){if((f)>0){var n=d.options.formatPage(f,false);n.data("Indextank.Pagination.page",f);n.data("Indextank.Pagination.data",h);l.prepend(n);g++}}if(m[i]>0){if((f)<=k){var n=d.options.formatPage(f,false);n.data("Indextank.Pagination.page",f);n.data("Indextank.Pagination.data",h);l.append(n);g++}}}l.append(a("<div/>").css({clear:"both"}));a("li",l).click(function(t){t.preventDefault();var s=a(this);var u=s.data("Indextank.Pagination.data");var r=s.data("Indextank.Pagination.page");var o=u.query.clone();o.withStart(o.rsLength*(r-1));u.searcher.trigger("Indextank.AjaxSearch.runQuery",o)});l.appendTo(d.$el)})};d.init()};a.Indextank.Pagination.defaultOptions={maxPages:10,formatPage:function(d,c){var b=a("<li/>").text(d);if(c){b.addClass("selected")}return b}};a.fn.indextank_Pagination=function(b){return this.each(function(){(new a.Indextank.Pagination(this,b))})}})(jQuery);