function Filter(b,c,a){this.name=b;this.title=c;this.fields=a||[];this.errors=[];this.ids=[];this.set=function(d){this.arguments=[];for(index in this.fields){this.arguments.push(d[this.fields[index].name])}};this.unset=function(){if(this.arguments){delete this.arguments}};this.filter=function(f){if(this.arguments===undefined){return true}var e=this.arguments[0];var d=this.arguments[1];var g=f[this.name];if(g<e||g>d){return false}return true};this.clean=function(){this.cleaned_data={};for(field in this.fields){this.cleaned_data[this.fields[field].name]=this.fields[field].clean()}return this.cleaned_data};this.handle_submit=function(){var h=this.id.split("-")[1];var f=all_filters[h];try{var d=f.clean()}catch(g){alert("Error: "+g);return false}if(d.length==0){$("#status").text("There was an error processing your form.")}else{f.set(d);if(selected_species){populateMapBySpecies(selected_species)}$(this).parent().parent().find(".selected").removeClass("selected");$(this).parent().addClass("selected")}$("input:text").labelify({labelledClass:"label-highlight"});return false};this.prepare=function(){for(index in this.fields){this.fields[index].prepare()}var d="form-"+this.name;var e=$("#"+d);if(e.length==0){}e.submit(this.handle_submit)}}function DateFilter(b,c,a){Filter.call(this,b,c,a);this.set=function(d){var g;var l;var k;var f;var h;var i;var e;var j=null;if(d.startyear&&d.endyear){k=parseInt(d.startyear);f=parseInt(d.endyear);if(d.startmonth&&d.endmonth){h=parseInt(d.startmonth);i=parseInt(d.endmonth);if(d.startday&&d.endday){e=parseInt(d.startday);j=parseInt(d.endday)}else{e=1}}else{h=1;e=1;i=12}g=new Date(k,h-1,e);if(j!==null){l=new Date(f,i-1,j)}else{j=28;l=new Date(f,i-1,j);while(l.getMonth()==i-1){l.setDate(l.getDate()+1)}l.setDate(l.getDate()-1)}this.arguments=[g,l]}}}DateFilter.prototype=new Filter;function Field(b,a){this.name=b;this.options=a||{};this.options.required=typeof(this.options.required)===undefined?true:this.options.required;this.options.label=this.options.label||"";this.options.help_text=this.options.help_text||"";this.validate=function(){};this.clean=function(){return $("#"+this.name).val()};this.prepare=function(){return $("#"+this.name).val()}}function ChoiceField(b,a){Field.call(this,b,a);this.clean=function(){return $("#"+this.name).val()};this.prepare=function(){var e=$("#"+this.name);for(var d=0;d<this.options.choices.length;d++){var c=this.options.choices[d];e.append($("<option value='"+c[0]+"'>"+c[1]+"</option>"))}}}ChoiceField.prototype=new Field;